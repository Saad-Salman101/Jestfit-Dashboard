import{R as O,K as M,a as L,r as s,j as t,P as U,h as q,L as m,A as H,l as K,n as Q,o as W,p as G,q as y,s as a,t as J,U as V,Q as X,f as Y}from"./index-DLcGPbaO.js";import{I as Z}from"./index-CL5Dlw3a.js";import{I as _}from"./IconEdit-CZzn1Q2S.js";var $=O("eye-filled","IconEyeFilled",[["path",{d:"M12 4c4.29 0 7.863 2.429 10.665 7.154l.22 .379l.045 .1l.03 .083l.014 .055l.014 .082l.011 .1v.11l-.014 .111a.992 .992 0 0 1 -.026 .11l-.039 .108l-.036 .075l-.016 .03c-2.764 4.836 -6.3 7.38 -10.555 7.499l-.313 .004c-4.396 0 -8.037 -2.549 -10.868 -7.504a1 1 0 0 1 0 -.992c2.831 -4.955 6.472 -7.504 10.868 -7.504zm0 5a3 3 0 1 0 0 6a3 3 0 0 0 0 -6z",fill:"currentColor",key:"svg-0",strokeWidth:"0"}]]);function se(){const n=M(e=>e.user.userDetail),g=L(),[f,C]=s.useState([]),[u,d]=s.useState(1),[b,P]=s.useState(""),[k,h]=s.useState(!1),[w,I]=s.useState(""),[o,p]=s.useState(10),[v,D]=s.useState(0),[x,T]=s.useState(!1);s.useState([]),s.useState(0),s.useState(5);const[l,R]=s.useState({paymentStatus:"",customerID:"",bookingStatus:""}),r=e=>{const{name:i,value:c}=e.target;R({...l,[i]:c})},B=async()=>{try{const e=await Y.get("/order",{params:{limit:o,page:u,customerID:n.role==="admin"?l.customerID:n.id,paymentStatus:l.paymentStatus,bookingStatus:l.bookingStatus,sortBy:"createdAt:desc"},headers:{}});C(e.data.result.results),d(e.data.result.page),p(e.data.result.limit),I(e.data.result.totalPages),D(e.data.result.totalResults)}catch(e){console.log(e)}},A=(e,i)=>{d(i+1)},E=e=>{p(parseInt(e.target.value,10)),d(1)},N={paid:"green",cancelled:"red",verifying:"orange",failed:"grey",processing:"blue",confirmed:"purple"},z={processing:"blue",confirmed:"green",cancelled:"red",pending:"orange",completed:"purple"};s.useEffect(()=>{B()},[u,o,x]);const F=()=>{h(!1)};return t.jsxs(U,{children:[t.jsxs(q,{display:"flex",justifyContent:"flex-start",gap:5,p:2,children:[t.jsx(m,{label:"Search by payment status",name:"paymentStatus",value:l.paymentStatus,onChange:r}),n.role==="admin"?t.jsx(m,{label:"Search by CustomerID",name:"customerID",value:l.customerID,onChange:r}):null,t.jsx(m,{label:"Search by Booking status",name:"bookingStatus",value:l.bookingStatus,onChange:r}),t.jsx(H,{children:t.jsx(K,{onClick:()=>T(!x),size:"large",variant:"contained",color:"secondary",children:"Search"})})]}),t.jsx(Q,{children:t.jsxs(W,{children:[t.jsx(G,{children:t.jsxs(y,{children:[t.jsx(a,{children:"Order ID"}),t.jsx(a,{children:"Booking Type"}),n.role==="admin"?t.jsx(a,{children:"Customer Name"}):null,t.jsx(a,{children:"Payment Status"}),t.jsx(a,{children:"Booking Status"}),t.jsx(a,{children:"Amount"}),t.jsx(a,{children:"Payment Proof"}),n.role==="admin"?t.jsx(a,{children:"Options"}):null]})}),t.jsx(J,{children:f.map((e,i)=>{var c,j,S;return t.jsxs(y,{children:[t.jsx(a,{children:e==null?void 0:e.id}),t.jsx(a,{children:e==null?void 0:e.type}),n.role==="admin"?t.jsx(a,{children:typeof((c=e==null?void 0:e.customerID)==null?void 0:c.firstName)=="string"?((j=e==null?void 0:e.customerID)==null?void 0:j.firstName)+" "+((S=e==null?void 0:e.customerID)==null?void 0:S.lastName):"N/A"}):null,t.jsx(a,{style:{textTransform:"capitalize",color:N[e==null?void 0:e.paymentStatus]},children:e==null?void 0:e.paymentStatus}),t.jsx(a,{style:{textTransform:"capitalize",color:z[e==null?void 0:e.bookingStatus]},children:e==null?void 0:e.bookingStatus}),t.jsx(a,{children:e==null?void 0:e.amount}),t.jsx(a,{children:t.jsx(V,{onClick:()=>{P(e==null?void 0:e.image),h(!0)},src:e==null?void 0:e.image})}),t.jsxs(a,{children:[t.jsx($,{onClick:()=>g("/viewOrder",{state:{id:e==null?void 0:e.id}})}),n.role==="admin"?t.jsx(_,{onClick:()=>g("/updateOrder",{state:{data:e}})}):null]})]},e.id)})})]})}),t.jsx(X,{component:"div",count:v,defaultpage:1,page:u-1,onPageChange:A,rowsPerPage:o,onRowsPerPageChange:E}),t.jsx(Z,{imageUrl:b,open:k,handleClose:F})]})}export{se as default};
