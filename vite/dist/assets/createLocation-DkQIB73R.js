import{c as k,d,e as w,K as B,r as f,a as C,b as W,j as e,F as v,f as D,B as q,g as F,h as V,G as L,i as l,I as p,O as m,k as u,S as j,at as A,M as y,D as G,l as M}from"./index-DLcGPbaO.js";const N=k({name:d().required("Name is required"),addressLineOne:d().required("Address is required"),description:d().required("Description is required"),block:d().required("Block is required"),city:d().required("City is required"),openingTime:d().required("Opening Time is required"),closingTime:d().required("Closing Time is required"),locationUrl:d().required("Location URL is required"),vendorID:d().required("Vendor ID is required"),tags:w().of(d()).required("At least one tag is required")}),E=["cricket","tennis","swimming","pool"],z=()=>{var I;const g=B(n=>n.user.userDetail),[b,O]=f.useState([]),T=C(),U={name:"",addressLineOne:"",description:"",block:"",city:"",sportType:"",locationUrl:"",vendorID:g.role==="admin"?"":(I=g.vendorID)==null?void 0:I.id,images:[],tags:[]},S=async()=>{var o;const n=await D.get("/vendor",{params:{limit:100}});console.log((o=g.vendorID)==null?void 0:o.id),O(n.data.result.results)};f.useEffect(()=>{S()},[]);const c=W();return e.jsx(v,{initialValues:U,validationSchema:N,onSubmit:async(n,{setSubmitting:o})=>{console.log("Wow"),o(!0),console.log(n,"<==== values ");const r=new FormData;r.append("name",n.name),r.append("addressLineOne",n.addressLineOne),r.append("block",n.block),r.append("city",n.city),r.append("sportType",n.sportType),r.append("openingTime",n.openingTime),r.append("closingTime",n.closingTime),r.append("locationUrl",n.locationUrl),r.append("vendorID",n.vendorID),r.append("description",n.description),console.log(n.images,"<=== images");for(let s=0;s<n.images.length;s++)r.append("images",n.images[s]);console.log(n.tags,"<=== tags");for(let s=0;s<n.tags.length;s++)r.append("tags",n.tags[s]);try{const s=await D.post("/location",r,{headers:{"Content-Type":"multipart/form-data"}});console.log(s,"<==== response"),T("/location"),q.success("Submitted successfully!")}catch(s){console.error(s,"<==== error"),q.error("Submission failed!")}o(!1)},children:({values:n,handleChange:o,handleBlur:r,handleSubmit:s,isSubmitting:R,touched:a,errors:t,setFieldValue:x})=>e.jsx(F,{onSubmit:s,children:e.jsx(V,{sx:{flexGrow:1,p:2},children:e.jsxs(L,{container:!0,spacing:2,children:[e.jsxs(l,{fullWidth:!0,error:!!(a.name&&t.name),sx:{...c.typography.customInput},children:[e.jsx(p,{htmlFor:"outlined-adornment-name-register",children:"Venue Name "}),e.jsx(m,{id:"outlined-adornment-name-register",value:n.name,name:"name",onBlur:r,onChange:o}),a.name&&t.name&&e.jsx(u,{error:!0,id:"standard-weight-helper-text--register",children:t.name})]}),e.jsxs(l,{fullWidth:!0,error:!!(a.description&&t.description),sx:{...c.typography.customInput},children:[e.jsxs(p,{htmlFor:"outlined-adornment-address-register",children:[" ","Description"," "]}),e.jsx(m,{id:"outlined-adornment-address-register",value:n.description,name:"description",onBlur:r,onChange:o}),a.description&&t.description&&e.jsx(u,{error:!0,id:"standard-weight-helper-text--register",children:t.description})]}),e.jsxs(l,{fullWidth:!0,error:!!(a.addressLineOne&&t.addressLineOne),sx:{...c.typography.customInput},children:[e.jsxs(p,{htmlFor:"outlined-adornment-addressLineOne-register",children:["Address"," "]}),e.jsx(m,{id:"outlined-adornment-addressLineOne-register",value:n.addressLineOne,name:"addressLineOne",onBlur:r,onChange:o}),a.addressLineOne&&t.addressLineOne&&e.jsx(u,{error:!0,id:"standard-weight-helper-text--register",children:t.addressLineOne})]}),e.jsxs(l,{fullWidth:!0,sx:{...c.typography.customSelect},children:[e.jsx(p,{id:"tags-label",children:"Block"}),e.jsx(j,{labelId:"vendor-ID",id:"VendorID",value:n.block,onChange:i=>x("block",i.target.value),children:A.map((i,h)=>e.jsx(y,{value:i.name,children:i.name},h))})]}),e.jsxs(l,{fullWidth:!0,error:!!(a.city&&t.city),sx:{...c.typography.customInput},children:[e.jsx(p,{htmlFor:"outlined-adornment-city-register",children:"City "}),e.jsx(m,{id:"outlined-adornment-city-register",value:n.city,name:"city",onBlur:r,onChange:o}),a.city&&t.city&&e.jsx(u,{error:!0,id:"standard-weight-helper-text--register",children:t.city})]}),e.jsxs(l,{fullWidth:!0,error:!!(a.locationUrl&&t.locationUrl),sx:{...c.typography.customInput},children:[e.jsx(p,{htmlFor:"outlined-adornment-locationUrl-register",children:"Google Map Location URL"}),e.jsx(m,{id:"outlined-adornment-locationUrl-register",value:n.locationUrl,name:"locationUrl",onBlur:r,onChange:o}),a.locationUrl&&t.locationUrl&&e.jsx(u,{error:!0,id:"standard-weight-helper-text--register",children:t.locationUrl})]}),g.role==="admin"?e.jsxs(l,{fullWidth:!0,sx:{...c.typography.customSelect},children:[e.jsx(p,{id:"vendorID",children:"Vendor"}),e.jsx(j,{labelId:"vendorID",id:"VendorID",value:n.vendorID,onChange:i=>x("vendorID",i.target.value),children:b.map((i,h)=>e.jsx(y,{value:i.id,children:i.companyName},h))})]}):null,e.jsxs(l,{fullWidth:!0,sx:{...c.typography.customMultiSelect},children:[e.jsx(p,{id:"tags-label",children:"Tags"}),e.jsx(j,{labelId:"tags-label",id:"tags",multiple:!0,value:n.tags,onChange:i=>x("tags",i.target.value),renderValue:i=>i.join(", "),children:E.map(i=>e.jsx(y,{value:i,children:i},i))})]}),e.jsx(l,{fullWidth:!0,sx:{mt:2},children:e.jsx(G,{setFieldValue:x,values:n})}),e.jsx(L,{item:!0,xs:12,children:e.jsx(M,{type:"submit",size:"large",variant:"contained",color:"secondary",children:"Create Location"})})]})})})})};export{z as default};
