import{u as V,r as m,j as e,h as l,G as x,X as h,Y as F,T as o,Z as R,_ as X,$ as Z,a0 as _,U as q,a1 as z,f as H}from"./index-DLcGPbaO.js";import{I as J}from"./index-CL5Dlw3a.js";const ee=()=>{var g,j,p,y,f,D,B,I,v,b,S,w,N,k,A,C,L;const $=V(),{id:E}=$.state||{},[r,P]=m.useState({}),i=(s,t="N/A")=>s||t,[T,G]=m.useState(""),[M,u]=m.useState(!1),O=s=>s?new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(s)):"N/A",U=async()=>{const s=await H.get("/order/"+E);P(s.data.result),console.log(s.data.result)},K=s=>{const t={};return s.forEach(n=>{const a=n.locationID.name,c=new Date(n.date).toLocaleDateString();t[a]||(t[a]={}),t[a][c]||(t[a][c]=[]),t[a][c].push(n)}),t},d=r.bookings?K(r.bookings):{},Y=()=>{u(!1)};return m.useEffect(()=>{U()},[]),e.jsxs(l,{sx:{padding:4},children:[e.jsxs(x,{container:!0,spacing:4,children:[e.jsx(x,{item:!0,xs:12,md:6,children:e.jsx(h,{sx:{marginBottom:4},children:e.jsxs(F,{children:[e.jsx(o,{variant:"h2",gutterBottom:!0,children:"Booking Details"}),e.jsxs(o,{variant:"body1",children:[e.jsx("strong",{children:"Payment Status:"})," ",i((g=r==null?void 0:r.order)==null?void 0:g.paymentStatus)]}),e.jsxs(o,{variant:"body1",children:[e.jsx("strong",{children:"Booking Status:"})," ",i((j=r==null?void 0:r.order)==null?void 0:j.bookingStatus)]}),e.jsxs(o,{variant:"body1",children:[e.jsx("strong",{children:"Amount:"})," ",i((p=r==null?void 0:r.order)==null?void 0:p.amount)," PKR"]}),e.jsxs(o,{variant:"body1",children:[e.jsx("strong",{children:"Booking Date:"})," ",O((y=r==null?void 0:r.order)==null?void 0:y.createdAt)]}),e.jsx(R,{sx:{marginY:2}}),e.jsx(o,{variant:"h3",gutterBottom:!0,children:"Customer Information"}),e.jsxs(o,{variant:"body1",children:[e.jsx("strong",{children:"Name:"})," ",typeof((D=(f=r==null?void 0:r.order)==null?void 0:f.customerID)==null?void 0:D.firstName)=="string"?i(((I=(B=r==null?void 0:r.order)==null?void 0:B.customerID)==null?void 0:I.firstName)+" "+((b=(v=r==null?void 0:r.order)==null?void 0:v.customerID)==null?void 0:b.lastName)):i((S=r==null?void 0:r.order)==null?void 0:S.customerName)]}),e.jsxs(o,{variant:"body1",children:[e.jsx("strong",{children:"Email:"})," ",i((N=(w=r==null?void 0:r.order)==null?void 0:w.customerID)==null?void 0:N.email)]}),e.jsxs(o,{variant:"body1",children:[e.jsx("strong",{children:"Phone Number:"})," ",i((A=(k=r==null?void 0:r.order)==null?void 0:k.customerID)==null?void 0:A.phoneNumber)]})]})})}),e.jsx(x,{item:!0,xs:12,md:6,children:e.jsx(h,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"280px"},children:((C=r==null?void 0:r.order)==null?void 0:C.image)!=="N/A"?e.jsx(l,{onClick:()=>{var s,t;(s=r==null?void 0:r.order)!=null&&s.image&&(G((t=r==null?void 0:r.order)==null?void 0:t.image),u(!0))},component:"img",src:(L=r==null?void 0:r.order)==null?void 0:L.image,alt:"Booking Image",sx:{width:"80%",height:"90%",borderRadius:2,cursor:"pointer"}}):e.jsx(o,{variant:"h3",color:"text.secondary",children:"Fast Booking"})})})]}),e.jsx(h,{children:e.jsxs(F,{children:[e.jsx(o,{variant:"h5",gutterBottom:!0,children:"Bookings"}),Object.keys(d).map(s=>e.jsxs(l,{sx:{marginBottom:4},children:[e.jsxs(o,{variant:"h6",gutterBottom:!0,children:["Location: ",s]}),Object.keys(d[s]).map(t=>e.jsxs(l,{sx:{marginBottom:2},children:[e.jsxs(o,{variant:"subtitle1",gutterBottom:!0,children:["Date: ",t]}),e.jsx(X,{children:d[s][t].map((n,a)=>{var c;return e.jsxs(Z.Fragment,{children:[a>0&&e.jsx(R,{}),e.jsxs(_,{alignItems:"flex-start",children:[e.jsx(q,{src:`${(c=n.fieldID.images[0])==null?void 0:c.uri}`,alt:n.locationID.name,variant:"rounded",sx:{width:56,height:56,marginRight:2}}),e.jsx(z,{primary:`Field: ${n.fieldID.name}`,secondary:e.jsxs(e.Fragment,{children:[e.jsx(o,{component:"span",variant:"body2",color:"text.primary",children:`From: ${n.from} To: ${n.to}`}),e.jsx("br",{}),e.jsx(o,{component:"span",variant:"body2",color:"text.primary",children:`Price: ${n.price} PKR`})]})})]})]},n.id)})})]},t))]},s))]})}),e.jsx(J,{imageUrl:T,open:M,handleClose:Y})]})};export{ee as default};
